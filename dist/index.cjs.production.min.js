"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("fast-xml-parser");const t=/^\d+/,r=/\d+$/,s=/(\(|\[)(.+)(\)|\])/;function a(e){e.trim();const a=e.replace(t,"").replace(s,"").replace(r,"").trim(),n=e.match(t),i=e.match(s),o=e.match(r);return{name:a,amount:n?parseInt(n[0]):void 0,set:i?i[2]:void 0,collectors:o?parseInt(o[0]):void 0}}class n{constructor(e){const{amount:t,name:r,set:s,collectors:a,mtgoID:n}="string"==typeof e?this.parseString(e):this.parseObject(e);this.name=r,this.amount=t,this.set=s,this.collectors=a,this.mtgoID=n}parseString(e){return a(e)}parseObject(e){return{name:e.Name,amount:parseInt(e.Quantity),mtgoID:e.CatID}}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o{constructor(){i(this,"valid",!1),i(this,"deck",[]),i(this,"sideboard",[]),i(this,"companion",null),i(this,"commander",null)}}var c;!function(e){e[e.unstarted=0]="unstarted",e[e.commander=1]="commander",e[e.companion=2]="companion",e[e.deck=3]="deck",e[e.sideboard=4]="sideboard"}(c||(c={}));const d=/^deck$/i,l=/^sideboard$/i,m=/^commander$/i,u=/^companion$/i,h=/\n/g;class p extends o{constructor(e){super();let t=e.toString().trim().split(h),r=0;try{t.forEach((e=>{if((e=e.trim()).match(m))r=1;else if(e.match(u))r=2;else if(e.match(d))r=3;else{if(0===r&&e.length>0)r=3;else{if(e.match(l)||3===r&&0===e.length)return void(r=4);if(0===e.length)return}switch(r){case 1:this.commander=new n(e);break;case 2:this.companion=new n(e);break;case 3:this.deck.push(new n(e));break;case 4:this.sideboard.push(new n(e))}}})),this.valid=!0}catch(e){this.valid=!1,console.error(e)}}}class b extends o{constructor(t,r=!0){super(),t=t.toString().trim();const s=e.validate(t);this.valid=!0===s,this.valid?e.parse(t,{attributeNamePrefix:"",ignoreAttributes:!1}).Deck.Cards.forEach((e=>{"16777728"===e.Annotation?this.commander=new n(e):"true"===e.Sideboard?this.sideboard.push(new n(e)):this.deck.push(new n(e))})):r&&console.error(s.err)}}function f(e){const t=new b(e,!1);return t.valid?t:new p(e)}exports.CardModel=n,exports.Decklist=p,exports.MTGO=b,exports.autoParse=f,exports.default=f,exports.parseString=a;
//# sourceMappingURL=index.cjs.production.min.js.map
